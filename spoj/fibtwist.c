#include<stdio.h>
int main()
{
    int T=0;
    long long int F[2][2],M[2][2],n=0,m=0,a,b,c,d,ans=0,k=0;
    scanf("%d",&T);
    while(T--)
    {
        ans=0;
        scanf("%lld%lld",&n,&m);
        n=n+1;
        k=n;
        F[0][0]=1;
        F[0][1]=1;
        F[1][0]=1;
        F[1][1]=0;

        M[0][0]=1;
        M[0][1]=0;
        M[1][0]=0;
        M[1][1]=1;
        while(n)
        {
            if(n%2!=0)
            {
                a=(((F[0][0]*M[0][0])+(F[1][0]*M[0][1])))%m;
                b=(((F[0][1]*M[0][0])+(F[1][1]*M[0][1])))%m;
                c=(((M[1][0]*F[0][0])+(M[1][1]*F[1][0])))%m;
                d=(((M[1][0]*F[0][1])+(M[1][1]*F[1][1])))%m;
                M[0][0]=a;
                M[0][1]=b;
                M[1][0]=c;
                M[1][1]=d;
            }

            a=(((F[0][0]*F[0][0])+(F[0][1]*F[1][0])))%m;
            b=(((F[0][0]*F[0][1])+(F[1][0]*F[1][1])))%m;
            c=(((F[1][0]*F[0][0])+(F[1][1]*F[1][0])))%m;
            d=(((F[1][0]*F[0][1])+(F[1][1]*F[1][1])))%m;

            F[0][0]=a;
            F[0][1]=b;
            F[1][0]=c;
            F[1][1]=d;

            n=n>>1;
        }
        //printf("%lld\n",M[0][0]);
        ans=(((2*(M[0][0]))%m-(k+1)%m)+m)%m;
        printf("%lld\n",ans);
    }
    return 0;
}
