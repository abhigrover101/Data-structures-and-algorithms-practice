#include<stdio.h>
#include<string.h>
int main()
{
    long long int n=0;
    int N=0,m=0,i=0;
    long long int F[2][2],M[2][2];
    long long int a=0,b=0,c=0,d=0,k=0;
    scanf("%d",&N);
    while(N--)
    {
        scanf("%lld%d",&n,&m);
        k=(2<<(m-1));
        F[0][0]=1;
        F[0][1]=1;
        F[1][0]=1;
        F[1][1]=0;

        M[0][0]=1;
        M[0][1]=0;
        M[1][0]=0;
        M[1][1]=1;
        while(n)
        {
            if(n%2!=0)
            {
                a=((F[0][0]*M[0][0])+(F[1][0]*M[0][1]))%k;
                b=((F[0][1]*M[0][0])+(F[1][1]*M[0][1]))%k;
                c=((M[1][0]*F[0][0])+(M[1][1]*F[1][0]))%k;
                d=((M[1][0]*F[0][1])+(M[1][1]*F[1][1]))%k;
                M[0][0]=a;
                M[0][1]=b;
                M[1][0]=c;
                M[1][1]=d;
            }

            a=((F[0][0]*F[0][0])+(F[0][1]*F[1][0]))%k;
            b=((F[0][0]*F[0][1])+(F[1][0]*F[1][1]))%k;
            c=((F[1][0]*F[0][0])+(F[1][1]*F[1][0]))%k;
            d=((F[1][0]*F[0][1])+(F[1][1]*F[1][1]))%k;

            F[0][0]=a;
            F[0][1]=b;
            F[1][0]=c;
            F[1][1]=d;

            n=n>>1;
        }
        printf("%lld\n",M[0][0]);
    }

    return 0;
}
